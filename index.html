<!doctype html>
<html lang="ms" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>e-REKOD - Sistem Pengurusan Rekod</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  
  <style>
    body { font-family: 'Outfit', sans-serif; }
    .font-inter { font-family: 'Inter', sans-serif; }
    /* Efek Glassmorphism yang anda suka */
    .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.3); }
  </style>
</head>

<body class="h-full bg-slate-50 text-slate-900">

  <script>
    // MASUKKAN URL GOOGLE APPS SCRIPT ANDA DI SINI
    const GAS_URL = "https://script.google.com/macros/s/AKfycbybcRsiDviFkja1EWVF01AngTz4UnyfNnRttrOP7TY5wXsq6cpV5HYlnTfLl-jIT2roUw/exec";
  </script>

  <div id="loginPage" class="flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="w-full max-w-md space-y-8 glass p-8 rounded-3xl shadow-xl">
      <div class="text-center">
        <h2 class="text-3xl font-extrabold tracking-tight text-slate-900">e-REKOD</h2>
        <p class="mt-2 text-sm text-slate-600 font-inter">Sila log masuk untuk teruskan</p>
      </div>
      <form class="mt-8 space-y-6" onsubmit="handleLogin(event)">
        <div class="rounded-md shadow-sm -space-y-px">
          <input id="email" type="email" required class="appearance-none rounded-2xl relative block w-full px-4 py-3 border border-slate-300 placeholder-slate-500 text-slate-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Emel Jabatan">
        </div>
        <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-2xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all">
          LOG MASUK
        </button>
      </form>
    </div>
  </div>

  <div id="dashboard" class="hidden min-h-full">
    <nav class="bg-white border-b border-slate-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16 items-center">
          <span class="text-xl font-bold text-indigo-600 italic">e-REKOD </span>
          <button onclick="location.reload()" class="text-sm font-medium text-rose-600">Log Keluar</button>
        </div>
      </div>
    </nav>

    <main class="py-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 mb-8">
        <div class="glass p-6 rounded-3xl shadow-sm border-b-4 border-indigo-500">
          <p class="text-sm font-medium text-slate-500 uppercase">Rekod Alasan</p>
          <p id="statCount" class="mt-2 text-4xl font-extrabold text-slate-900">0</p>
        </div>
      </div>

      <div class="bg-white shadow-sm border border-slate-200 rounded-3xl overflow-hidden">
        <table class="min-w-full divide-y divide-slate-200">
          <thead class="bg-slate-50 font-inter">
            <tr>
              <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Daerah</th>
              <th class="px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Bulan</th>
              <th class="px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider">Bilangan</th>
            </tr>
          </thead>
          <tbody id="dataTable" class="divide-y divide-slate-200 text-sm font-inter">
            <tr><td colspan="3" class="px-6 py-10 text-center text-slate-400 italic">Sedang memuatkan data...</td></tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <script>
    // 1. Fungsi Login Tanpa SDK (Instant)
    function handleLogin(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      if(email) {
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('dashboard').classList.remove('hidden');
        fetchCloudData();
      }
    }

    // 2. Fungsi Ambil Data (Gantikan Data_SDK)
    async function fetchCloudData() {
      try {
        const response = await fetch(GAS_URL);
        const data = await response.json();
        
        const table = document.getElementById('dataTable');
        const stat = document.getElementById('statCount');
        
        if (data && data.length > 0) {
          stat.innerText = data.length;
          table.innerHTML = data.map(item => `
            <tr>
              <td class="px-6 py-4 font-semibold text-slate-700">${item.daerah || item[0]}</td>
              <td class="px-6 py-4 text-slate-500">${item.bulan || item[1]}</td>
              <td class="px-6 py-4 text-right font-black text-indigo-600">${item.bilangan || item[2]}</td>
            </tr>
          `).join('');
        }
      } catch (err) {
        document.getElementById('dataTable').innerHTML = `<tr><td colspan="3" class="p-4 text-center text-rose-500">Ralat sambungan: Sila pastikan URL GAS betul.</td></tr>`;
      }
    }
  </script>
</body>
</html>

